<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>èµ›åšæ¦«å¯ Cyber-Mortise</title>
    <script type="module" src="./model-viewer.min.js"></script>
    <style>
        body { margin: 0; background-color: #1a1a1a; font-family: sans-serif; overflow: hidden; }
        /* è®©æ¨¡å‹å æ»¡å…¨å± */
        model-viewer { width: 100vw; height: 100vh; background-color: #1a1a1a; }
        
        /* èµ›åšæœ‹å…‹é£æ ¼æ ‡é¢˜ */
        .title {
            position: absolute; top: 20px; left: 20px; color: #00ff00;
            z-index: 999; text-shadow: 0 0 10px #00ff00; pointer-events: none;
        }
        h2 { margin: 0; font-size: 1.5rem; }
        p { margin: 5px 0 0 0; font-size: 0.8rem; opacity: 0.8; }

        /* ğŸ”¥ æ–°å¢ï¼šè®©ç‚¹å‡»æŒ‰é’®çœ‹èµ·æ¥åƒä¸ªæŒ‰é’® ğŸ”¥ */
        #play-trigger {
            pointer-events: auto; /* è®©å®ƒèƒ½æ¥æ”¶ç‚¹å‡» */
            cursor: pointer;
            color: #ffff00; /* é»„è‰²é«˜äº® */
            text-decoration: underline;
            font-weight: bold;
            transition: all 0.3s;
        }
        #play-trigger:hover {
            color: #ffffff; text-shadow: 0 0 15px #ffff00;
        }
    </style>
</head>
<body>
    <div class="title">
        <h2>èµ›åšæ¦«å¯ Cyber-Mortise</h2>
        <p>åŒæŒ‡ç¼©æ”¾ | å•æŒ‡æ—‹è½¬ | <span id="play-trigger">â–¶ ç‚¹å‡»å¯åŠ¨çˆ†ç‚¸æ¼”ç¤º</span></p>
    </div>

<model-viewer 
    id="luban-lock" 
    src="./luban.glb" 
    alt="æ™ºèƒ½é²ç­é”3Dæ¨¡å‹"
    
    /* åˆå§‹çŠ¶æ€ï¼šæ¯”è¾ƒè¿‘çš„è·ç¦» (250%) */
    camera-orbit="0deg 75deg 250%"
    
    animation-name="*" 
    loop
    
    environment-image="neutral" 
    shadow-intensity="1" 
    exposure="1"
    
    ar 
    camera-controls 
    auto-rotate
    rotation-per-second="30deg">
</model-viewer>

<script>
    // 1. æ‰¾åˆ°é¡µé¢ä¸Šçš„å…ƒç´ 
    const modelViewer = document.querySelector('#luban-lock');
    const playButton = document.querySelector('#play-trigger');

    // 2. å®šä¹‰ä¸€ä¸ªæ ‡å¿—ä½ï¼Œè®°å½•ç°åœ¨æ˜¯ä¸æ˜¯â€œçˆ†ç‚¸çŠ¶æ€â€
    let isExploded = false;

    // 3. ç›‘å¬æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶
    playButton.addEventListener('click', () => {
        
        if (!isExploded) {
            // --- å¦‚æœè¿˜æ²¡çˆ†ç‚¸ï¼Œå°±æ‰§è¡Œçˆ†ç‚¸æµç¨‹ ---
            
            // A. æ‹‰è¿œé•œå¤´ï¼æŠŠè·ç¦»ä» 250% æ”¹æˆ 500% (æ ¹æ®ä½ çš„æ¨¡å‹å¤§å°å¾®è°ƒè¿™ä¸ªæ•°å­—)
            // model-viewer ä¼šè‡ªåŠ¨å¹³æ»‘è¿‡æ¸¡è¿‡å»
            modelViewer.setAttribute('camera-orbit', '0deg 75deg 500%');

            // B. å¼€å§‹æ’­æ”¾åŠ¨ç”»
            modelViewer.play();

            // C. æ›´æ–°æŒ‰é’®æ–‡å­—å’ŒçŠ¶æ€
            playButton.textContent = 'â¹ ç‚¹å‡»åœæ­¢å¹¶å¤ä½';
            isExploded = true;

        } else {
            // --- å¦‚æœå·²ç»æ˜¯çˆ†ç‚¸çŠ¶æ€ï¼Œç‚¹å‡»å°±å¤ä½ ---
            
            // A. æš‚åœåŠ¨ç”»å¹¶å›åˆ°å¼€å¤´
            modelViewer.pause();
            modelViewer.currentTime = 0;

            // B. é•œå¤´æ‹‰è¿‘å›åŸä½
            modelViewer.setAttribute('camera-orbit', '0deg 75deg 250%');

             // C. æ›´æ–°æŒ‰é’®æ–‡å­—å’ŒçŠ¶æ€
            playButton.textContent = 'â–¶ ç‚¹å‡»å¯åŠ¨çˆ†ç‚¸æ¼”ç¤º';
            isExploded = false;
        }
    });
</script>

</body>
</html>
